# Conditional AugmentationFlow Configuration
# Learns controllable augmentation flow with difficulty conditioning

agent: augmentation_flow

dataset: cifar10
batch_size: 128
epochs: 100

# Model (Conditional U-Net with difficulty embedding)
model: conditional_unet

# Optimizer
optimizer: adam
lr: 0.0001

# Transforms
transform:
  weak: "resize(size=32) | random_flip | normalize"
  strong: "resize(size=32) | random_flip | rand_augment(n=2, m=10) | normalize"
  normalizer: data_normalizer
  unnormalizer: data_normalizer(inverse=true)
  noise_schedule: noise_schedule(schedule_type="cosine")

# Solver
solver: euler

# Training
predict: flow
max_grad_norm: 1.0

# Conditioning - ENABLED
use_conditioning: true
condition_type: difficulty  # Use time as difficulty signal (higher t = stronger augmentation)

# Alternative conditioning modes:
# condition_type: random         # Random difficulty [0, 1] each step
# condition_type: fixed          # Fixed difficulty (set condition_value)
# condition_value: 0.5           # For fixed mode

# Inference conditioning
val_condition: 1.0      # Max difficulty for validation
sample_condition: 1.0   # Max difficulty for visualization

# EMA
use_ema: true
ema_kwargs:
  beta: 0.995
  update_every: 10

# Checkpointing
checkpoint_dir: checkpoints/augmentation_flow_conditional
save_checkpoint_every: 1000

# Visualization
results_dir: results/augmentation_flow_conditional
save_results_every: 500
sample_steps: 50
num_samples: 16

# Logging
logger: tensorboard
log_dir: logs/augmentation_flow_conditional

device: 0

# Usage in SSL:
# - condition=0.0: No augmentation (identity)
# - condition=0.5: Medium augmentation
# - condition=1.0: Maximum augmentation (strong)
