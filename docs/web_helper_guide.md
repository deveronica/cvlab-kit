# Web Helper κ°€μ΄λ“

> μ›Ή κΈ°λ° μ‹¤ν— κ΄€λ¦¬ λ° κ²°κ³Ό λ¶„μ„ ν”λ«νΌ

Web Helperλ” CVLab-Kitμ μ›Ή μΈν„°νμ΄μ¤λ΅, μ‹¤ν— μ‹¤ν–‰, λ¨λ‹ν„°λ§, κ²°κ³Ό λ¶„μ„μ„ ν• κ³³μ—μ„ μ²λ¦¬ν•  μ μλ” ν†µν•© ν”λ«νΌμ…λ‹λ‹¤.

## μ£Όμ” κΈ°λ¥

### π― μ‹¤μ‹κ°„ μ‹¤ν— λ¨λ‹ν„°λ§
- **GPU μ‚¬μ©λ¥  μ¶”μ **: 3μ΄λ§λ‹¤ μ—…λ°μ΄νΈλλ” μ‹¤μ‹κ°„ heartbeat
- **ν μ‹μ¤ν…**: μ—¬λ¬ μ‹¤ν—μ„ μλ™μΌλ΅ μμ°¨ μ‹¤ν–‰
- **SSE μ¤νΈλ¦¬λ°**: λ΅κ·Έ, λ©”νΈλ¦­, μƒνƒ λ³€ν™” μ‹¤μ‹κ°„ λ°μ

### π“ κ²°κ³Ό λ¶„μ„ λ° λΉ„κµ
- **λ©”νΈλ¦­ λΉ„κµ ν…μ΄λΈ”**: μ—¬λ¬ μ‹¤ν— κ²°κ³Όλ¥Ό ν•λμ— λΉ„κµ
- **μ°¨νΈ μ‹κ°ν™”**: ν•™μµ κ³΅μ„ , μ„±λ¥ μ¶”μ΄, ν†µκ³„ λ¶„μ„
- **ν•„ν„°λ§ λ° μ •λ ¬**: ν”„λ΅μ νΈ, λ©”νΈλ¦­, λ‚ μ§λ³„ ν•„ν„°λ§

### π λ¶„μ‚° μ‹¤ν–‰ μ§€μ›
- **Server-Client κµ¬μ΅°**: μ¤‘μ•™ μ„λ²„κ°€ μ—¬λ¬ GPU ν΄λΌμ΄μ–ΈνΈ κ΄€λ¦¬
- **μλ™ λ¶€ν• λ¶„μ‚°**: idle GPUμ— μ‹¤ν— μλ™ ν• λ‹Ή
- **λ΅κ·Έ λ™κΈ°ν™”**: μ›κ²© μ‹¤ν–‰ κ²°κ³Όλ¥Ό μλ™μΌλ΅ μ¤‘μ•™ μ„λ²„μ— λ™κΈ°ν™”

---

## μ‹μ‘ν•κΈ°

### λ΅μ»¬ μ‹¤ν–‰

**Backendλ§ μ‹¤ν–‰** (ν”„λ΅λ•μ…):
```bash
uv run app.py
```

**Frontend + Backend κ°λ° λ¨λ“**:
```bash
uv run app.py --dev
```

λΈλΌμ°μ €μ—μ„ `http://localhost:8000`μ— μ ‘μ†ν•μ„Έμ”.

### λ¶„μ‚° μ‹¤ν–‰

**μ„λ²„** (μ¤‘μ•™ κ΄€λ¦¬):
```bash
uv run app.py --server-only --host 0.0.0.0
```

**ν΄λΌμ΄μ–ΈνΈ 1**:
```bash
uv run app.py --client-only --url http://server-ip:8000
```

**ν΄λΌμ΄μ–ΈνΈ 2**:
```bash
uv run app.py --client-only --url http://server-ip:8000
```

---

## μΈν„°νμ΄μ¤ κµ¬μ„±

### 1. Dashboard

**μ‹μ¤ν… μ „μ²΄ κ°μ”**

![Dashboard](assets/web-ui-dashboard.png)

**μ£Όμ” κΈ°λ¥**:

- μ „μ²΄ ν”„λ΅μ νΈ ν„ν™© (ν”„λ΅μ νΈ μ, μ΄ μ‹¤ν— μ)
- μµκ·Ό μ‹¤ν— μ‹¤ν–‰ νƒ€μ„λΌμΈ
- GPU μ‚¬μ©λ¥  λ¨λ‹ν„°λ§
- μ‹μ¤ν… μƒνƒ ν•λμ— νμ•…

---

### 2. Projects νƒ­

**ν”„λ΅μ νΈλ³„ μ‹¤ν— κ²°κ³Ό κ΄€λ¦¬**

![Projects](assets/web-ui-projects.png)

**μ£Όμ” κΈ°λ¥**:

- ν”„λ΅μ νΈλ³„ μ‹¤ν— κ²°κ³Ό λ©λ΅
- Run μ΄λ¦„, λ‚ μ§, λ©”νΈλ¦­ ν•λμ— ν™•μΈ
- μ‹¤ν— μ¬μ‹¤ν–‰, μ‚­μ , μ„¤μ • ν™•μΈ

**μ›ν¬ν”λ΅μ°**:

1. ν”„λ΅μ νΈ μ„ νƒ β†’ μ‹¤ν— λ©λ΅ ν™•μΈ
2. νΉμ • μ‹¤ν— ν΄λ¦­ β†’ μƒμ„Έ μ •λ³΄ λ¨λ‹¬ μ—΄λ¦Ό
3. μ„¤μ • YAML ν™•μΈ β†’ μ¬μ‹¤ν–‰ κ°€λ¥

**ν”„λ΅μ νΈ μƒμ„Έ ν™”λ©΄**:

![Project Detail](assets/web-ui-project-detail.png)

- **Timeline**: μ‹¤ν— μ‹¤ν–‰ μ‹κ°„λ³„ λ¶„ν¬
- **Statistics**: ν•µμ‹¬ λ©”νΈλ¦­ ν†µκ³„
- **AI Recommendations**: μ„±λ¥ κ°μ„  μ μ•

---

### 3. Execute νƒ­

**μƒλ΅μ΄ μ‹¤ν— μ„¤μ • λ° μ‹¤ν–‰**

![Execute](assets/web-ui-execute.png)

**μ£Όμ” κΈ°λ¥**:

- YAML μ„¤μ • μ—λ””ν„° (CodeMirror)
- Dry-run κ²€μ¦ λ²„νΌ
- Grid Search μλ™ ν™•μ¥ λ―Έλ¦¬λ³΄κΈ°
- νμ— μ¶”κ°€ λλ” μ¦‰μ‹ μ‹¤ν–‰

**μ›ν¬ν”λ΅μ°**:

1. **YAML μ‘μ„±**: μ—λ””ν„°μ—μ„ μ„¤μ • νμΌ μ‘μ„±/μμ •
2. **Dry-run κ²€μ¦**: "Validate" λ²„νΌμΌλ΅ μ„¤μ • κ²€μ¦
3. **Grid Search ν™•μΈ**: λ¦¬μ¤νΈ κ°’μ΄ μμΌλ©΄ λ‡ κ° μ‹¤ν— μƒμ„±λλ”μ§€ ν™•μΈ
4. **νμ— μ¶”κ°€**: "Add to Queue" λ²„νΌμΌλ΅ μ‹¤ν— λ€κΈ°μ—΄μ— μ¶”κ°€

**ν**:

- `Ctrl+Space`: μλ™μ™„μ„±
- `Ctrl+F`: κ²€μƒ‰
- Grid Search μ‚¬μ© μ‹: `lr: [0.001, 0.01, 0.1]` ν•νƒλ΅ μ‘μ„±

---

### 4. Queue νƒ­

**μ‹¤ν— λ€κΈ°μ—΄ λ° μ‹¤ν–‰ μƒνƒ κ΄€λ¦¬**

![Queue](assets/web-ui-queue.png)

**μ£Όμ” κΈ°λ¥**:

- μ‹¤μ‹κ°„ ν μƒνƒ ν™•μΈ (Pending, Running, Completed, Failed)
- μ‹¤ν— μ·¨μ†, μ°μ„ μμ„ λ³€κ²½
- λ΅κ·Έ μ‹¤μ‹κ°„ μ¤νΈλ¦¬λ°
- μ‹¤ν–‰ μ‹κ°„, λ‚¨μ€ epoch ν™•μΈ

**μƒνƒ ν‘μ‹**:

- π΅ **Pending**: λ€κΈ° μ¤‘
- π”µ **Running**: μ‹¤ν–‰ μ¤‘
- πΆ **Completed**: μ™„λ£
- π”΄ **Failed**: μ‹¤ν¨

**μ›ν¬ν”λ΅μ°**:

1. μ‹¤ν—μ΄ νμ— μ¶”κ°€λλ©΄ μλ™μΌλ΅ idle GPU νƒμƒ‰
2. GPUκ°€ μ‚¬μ© κ°€λ¥ν•λ©΄ μλ™μΌλ΅ μ‹¤ν— μ‹μ‘
3. μ‹¤ν–‰ μ¤‘ λ΅κ·Έλ” μ‹¤μ‹κ°„μΌλ΅ ν‘μ‹
4. μ™„λ£λλ©΄ λ‹¤μ μ‹¤ν—μ΄ μλ™μΌλ΅ μ‹μ‘

---

### 5. Monitoring νƒ­

**GPU μ„λ²„ λ¨λ‹ν„°λ§**

![Monitoring](assets/web-ui-monitoring.png)

**μ£Όμ” κΈ°λ¥**:

- λ¨λ“  ν΄λΌμ΄μ–ΈνΈμ GPU μƒνƒ μ‹¤μ‹κ°„ ν™•μΈ
- GPU λ©”λ¨λ¦¬ μ‚¬μ©λ¥ , μ¨λ„, μ‚¬μ© μ¤‘μΈ ν”„λ΅μ„Έμ¤
- 3μ΄λ§λ‹¤ heartbeat μ—…λ°μ΄νΈ
- Idle/Busy μƒνƒ μλ™ κ°μ§€

**μ •λ³΄ ν‘μ‹**:

- **Device Name**: μ„λ²„ μ΄λ¦„
- **GPU Model**: GPU μΆ…λ¥ (e.g., NVIDIA RTX 3090)
- **Memory**: μ‚¬μ© μ¤‘ / μ „μ²΄ λ©”λ¨λ¦¬ (e.g., 8GB / 24GB)
- **Utilization**: GPU μ‚¬μ©λ¥  (%)
- **Status**: idle (λ…Ήμƒ‰) / busy (λΉ¨κ°•)

**ν**:

- Heartbeatμ΄ 3μ΄ μ΄μƒ λκΈ°λ©΄ ν΄λΌμ΄μ–ΈνΈκ°€ μ¤ν”„λΌμΈμΌλ΅ ν‘μ‹λ¨
- μ—¬λ¬ ν΄λΌμ΄μ–ΈνΈ μ—°κ²° μ‹ λ¶€ν• λ¶„μ‚° μλ™ μ²λ¦¬

---

### 6. Results νƒ­

**μ‹¤ν— μ‹¤ν–‰ μ΄λ ¥ λ° κ²°κ³Ό λ¶„μ„**

![Results](assets/web-ui-results.png)

**μ£Όμ” κΈ°λ¥**:

- λ¨λ“  μ‹¤ν— μ‹¤ν–‰ μ΄λ ¥μ„ μ‹κ°„μμΌλ΅ μ •λ ¬
- μ‹¤ν— μƒνƒ, λ©”νΈλ¦­, μ‹¤ν–‰ μ‹κ°„ ν™•μΈ
- ν”„λ΅μ νΈλ³„ ν•„ν„°λ§
- μ‹¤ν— μ¬μ‹¤ν–‰ λ° μƒμ„Έ μ •λ³΄ ν™•μΈ

**μ›ν¬ν”λ΅μ°**:

1. **νƒ€μ„λΌμΈ ν™•μΈ**: μµκ·Ό μ‹¤ν–‰λ μ‹¤ν—λ“¤μ μ‹κ°„λ³„ λ¶„ν¬
2. **ν•„ν„°λ§**: ν”„λ΅μ νΈ, μƒνƒ, λ‚ μ§λ³„λ΅ ν•„ν„°λ§
3. **μƒμ„Έ ν™•μΈ**: μ‹¤ν— ν΄λ¦­ μ‹ λ©”νΈλ¦­, μ„¤μ •, λ΅κ·Έ ν™•μΈ
4. **λΉ„κµ λ¶„μ„**: μ—¬λ¬ μ‹¤ν— μ„ νƒ ν›„ λ©”νΈλ¦­ λΉ„κµ

**ν**:

- ν…μ΄λΈ” μ»¬λΌ μ •λ ¬ κ°€λ¥ (ν΄λ¦­)
- κ²€μƒ‰μΌλ΅ νΉμ • μ‹¤ν— λΉ λ¥΄κ² μ°ΎκΈ°
- μ‹¤ν¨ν• μ‹¤ν—μ€ λΉ¨κ°„μƒ‰μΌλ΅ ν‘μ‹

**μ„¤μ • ν•­λ©**:

- **Log Directory**: `./logs/` (κΈ°λ³Έκ°’)
- **Refresh Interval**: SSE μ—…λ°μ΄νΈ μ£ΌκΈ° (κΈ°λ³Έ 3μ΄)
- **Theme**: Light/Dark λ¨λ“
- **Reindex**: λ΅κ·Έ νμΌ κ°•μ  μ¬μ¤μΊ”

---

## μ‹¤μ‹κ°„ κΈ°λ¥

### SSE (Server-Sent Events)

Web Helperλ” SSEλ¥Ό μ‚¬μ©ν•μ—¬ λ‹¤μ μ •λ³΄λ¥Ό μ‹¤μ‹κ°„μΌλ΅ μ—…λ°μ΄νΈν•©λ‹λ‹¤:

```typescript
// Frontend: SSE μ—°κ²° (μλ™)
const eventSource = new EventSource('/events/stream');

eventSource.addEventListener('device_update', (event) => {
  // GPU μƒνƒ μ—…λ°μ΄νΈ
});

eventSource.addEventListener('queue_update', (event) => {
  // ν μƒνƒ μ—…λ°μ΄νΈ
});

eventSource.addEventListener('metric_update', (event) => {
  // λ©”νΈλ¦­ μ—…λ°μ΄νΈ
});
```

**μ—…λ°μ΄νΈ μ΄λ²¤νΈ**:

- `device_update`: GPU heartbeat (3μ΄λ§λ‹¤)
- `queue_update`: ν μƒνƒ λ³€ν™” (μ‹¤ν— μ¶”κ°€/μ‹μ‘/μ™„λ£)
- `metric_update`: μƒλ΅μ΄ λ©”νΈλ¦­ κΈ°λ΅
- `log_update`: μ‹¤ν–‰ λ΅κ·Έ μ¤νΈλ¦¬λ°

---

## API μ—”λ“ν¬μΈνΈ

### ν”„λ΅μ νΈ λ° μ‹¤ν—

```bash
## λ¨λ“  ν”„λ΅μ νΈ λ©λ΅
GET /api/projects

## νΉμ • ν”„λ΅μ νΈμ μ‹¤ν— λ©λ΅
GET /api/runs?project=my_project

## μ‹¤ν— μƒμ„Έ μ •λ³΄
GET /api/run/{project}/{run_name}

## μ‹¤ν— μ¬μ‹¤ν–‰
POST /api/run/rerun
{
  "project": "my_project",
  "run_name": "experiment_1",
  "config": {...}
}
```

### ν κ΄€λ¦¬

```bash
## νμ— μ‹¤ν— μ¶”κ°€
POST /api/queue/add
{
  "project": "my_project",
  "config_yaml": "...",
  "priority": 0
}

## ν λ©λ΅
GET /api/queue

## μ‹¤ν— μ·¨μ†
POST /api/queue/cancel/{experiment_id}
```

### λ””λ°”μ΄μ¤ λ¨λ‹ν„°λ§

```bash
## λ””λ°”μ΄μ¤ λ©λ΅
GET /api/devices

## Heartbeat μ „μ†΅ (ν΄λΌμ΄μ–ΈνΈ)
POST /api/devices/heartbeat
{
  "device_name": "gpu_server_01",
  "gpus": [...]
}
```

### μ‹¤μ‹κ°„ μ΄λ²¤νΈ

```bash
## SSE μ¤νΈλ¦Ό μ—°κ²°
GET /events/stream
```

---

## νμΌ μ‹μ¤ν… κµ¬μ΅°

Web Helperλ” νμΌ κΈ°λ° ν†µμ‹ μ„ μ‚¬μ©ν•μ—¬ cvlabkitκ³Ό μ™„μ „ν λ¶„λ¦¬λμ–΄ μμµλ‹λ‹¤.

```
logs/
β”β”€β”€ <project>/
β”‚   β”β”€β”€ <run_name>.csv        # λ©”νΈλ¦­ (epoch, loss, accuracy, ...)
β”‚   β”β”€β”€ <run_name>.yaml       # μ‹¤ν— μ„¤μ •
β”‚   β””β”€β”€ <run_name>.pt         # μ²΄ν¬ν¬μΈνΈ

web_helper/
β”β”€β”€ state/
β”‚   β””β”€β”€ db.sqlite             # μ‹¤ν— μΈλ±μ¤, ν, λ””λ°”μ΄μ¤ μƒνƒ
β””β”€β”€ queue_logs/
    β””β”€β”€ <project>/
        β””β”€β”€ <experiment_id>/
            β”β”€β”€ config.yaml   # ν μ‹¤ν— μ„¤μ •
            β”β”€β”€ stdout.log    # ν‘μ¤€ μ¶λ ¥
            β””β”€β”€ stderr.log    # μ—λ¬ λ΅κ·Έ
```

**μ‘λ™ μ›λ¦¬**:

1. **cvlabkit** (CLI)κ°€ `./logs/`μ— κ²°κ³Ό κΈ°λ΅
2. **web_helper**κ°€ `watchdog`λ΅ νμΌ λ³€κ²½ κ°μ§€
3. λ³€κ²½ κ°μ§€ μ‹ DB μ—…λ°μ΄νΈ λ° SSE μ΄λ²¤νΈ λ°μƒ
4. ν”„λ΅ νΈμ—”λ“κ°€ μ‹¤μ‹κ°„μΌλ΅ UI μ—…λ°μ΄νΈ

---

## λ¶„μ‚° μ‹¤ν–‰ μ‹λ‚λ¦¬μ¤

### μ‹λ‚λ¦¬μ¤ 1: λ‹¨μΌ μ„λ²„ + μ—¬λ¬ ν΄λΌμ΄μ–ΈνΈ

**μ„λ²„** (μ¤‘μ•™ κ΄€λ¦¬, GPU μ—†μ):
```bash
uv run app.py --server-only --host 0.0.0.0
```

**ν΄λΌμ΄μ–ΈνΈ 1** (GPU μ„λ²„ A):
```bash
uv run app.py --client-only --url http://server:8000
```

**ν΄λΌμ΄μ–ΈνΈ 2** (GPU μ„λ²„ B):
```bash
uv run app.py --client-only --url http://server:8000
```

**μ›ν¬ν”λ΅μ°**:

1. μ„λ²„μ—μ„ μ‹¤ν— μ„¤μ • λ° νμ— μ¶”κ°€
2. ν΄λΌμ΄μ–ΈνΈκ°€ 3μ΄λ§λ‹¤ heartbeat μ „μ†΅
3. μ„λ²„κ°€ idle GPUλ¥Ό κ°μ§€ν•λ©΄ μ‹¤ν— ν• λ‹Ή
4. ν΄λΌμ΄μ–ΈνΈκ°€ μ‹¤ν— μ‹¤ν–‰ ν›„ λ΅κ·Έ λ™κΈ°ν™”
5. μ„λ²„μ—μ„ λ¨λ“  κ²°κ³Ό ν™•μΈ

### μ‹λ‚λ¦¬μ¤ 2: λ΅μ»¬ ν†µν•© ν™κ²½

**λ΅μ»¬ GPUκ°€ μλ” κ²½μ°**:
```bash
uv run app.py
```

μ›Ή UI + λ΅μ»¬ GPU μ‹¤ν–‰ λ¨λ‘ κ°€λ¥

---

## λ¬Έμ  ν•΄κ²°

### μ‹¤ν—μ΄ νμ—μ„ μ‹μ‘λμ§€ μ•μ

**μ›μΈ**:

- λ¨λ“  GPUκ°€ busy μƒνƒ
- ν΄λΌμ΄μ–ΈνΈ heartbeat λκΉ€
- μ„¤μ • νμΌ μ¤λ¥

**ν•΄κ²°**:

1. Devices νƒ­μ—μ„ GPU μƒνƒ ν™•μΈ
2. ν΄λΌμ΄μ–ΈνΈ λ΅κ·Έ ν™•μΈ: `tail -f /tmp/cvlab_client.log`
3. Execute νƒ­μ—μ„ Dry-run κ²€μ¦

### SSE μ—°κ²°μ΄ λκΉ€

**μ›μΈ**:

- λ„¤νΈμ›ν¬ λ¬Έμ 

**ν•΄κ²°**:

1. λΈλΌμ°μ € μ½μ†”μ—μ„ μ—λ¬ ν™•μΈ
2. νμ΄μ§€ μƒλ΅κ³ μΉ¨

### λ©”νΈλ¦­μ΄ ν‘μ‹λμ§€ μ•μ

**μ›μΈ**:

- CSV νμΌ ν•μ‹ μ¤λ¥
- μΈλ±μ‹± μ§€μ—°

**ν•΄κ²°**:

1. `logs/<project>/<run_name>.csv` νμΌ ν™•μΈ
2. Settings νƒ­μ—μ„ "Reindex" λ²„νΌ ν΄λ¦­
3. CSV ν—¤λ”κ°€ μ¬λ°”λ¥Έμ§€ ν™•μΈ (epoch, loss, accuracy, ...)

---

## κ΄€λ ¨ λ¬Έμ„

- [λ°°ν¬ κ°€μ΄λ“](deployment_guide.md) - μ„λ²„ μ„¤μ • λ° Docker λ°°ν¬
- [λ¶„μ‚° μ‹¤ν–‰ κ°€μ΄λ“](distributed_execution_guide.md) - Server-Client κµ¬μ΅° μƒμ„Έ μ„¤λ…
- [μ‹¤ν—μ κ°€μ΄λ“](user_guide_experimenter.md) - YAML μ„¤μ • λ° μ‹¤ν— μ‹¤ν–‰
- [λ¬Έμ  ν•΄κ²°](troubleshooting.md) - μΌλ°μ μΈ μ—λ¬ ν•΄κ²° λ°©λ²•
